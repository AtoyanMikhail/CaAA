import timeit
from math import inf
from little_algorithm import LittleTSP

def benchmark_case(matrix, start=0, iterations=5):
    """–ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã"""
    stmt = f'LittleTSP({matrix}, {start}).solve()'
    setup = f'from __main__ import LittleTSP; from math import inf'
    times = timeit.repeat(stmt, setup, number=1, repeat=iterations)
    return min(times), sum(times)/iterations, max(times)

def print_results(size, results):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
    print(f"\n{'–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã':^16}|{'–ú–∏–Ω–∏–º—É–º':^13}|{'–°—Ä–µ–¥–Ω–µ–µ':^13}|{'–ú–∞–∫—Å–∏–º—É–º':^13}")
    print(f"{'-'*16}|{'-'*13}|{'-'*13}|{'-'*13}")
    print(f" {size:^15}| {results[0]:^10.8f}s | {results[1]:^10.8f}s | {results[2]:^10.8f}s")

def run_benchmarks():
    """–ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–∞—Ç—Ä–∏—Ü —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤"""
    test_cases = {
        # –ú–∞—Ç—Ä–∏—Ü–∞ 3x3 (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å 1-2-3-1 = 80)
        3: [
            [inf, 10, 15],
            [10, inf, 35],
            [15, 35, inf]
        ]
        ,
        # –ú–∞—Ç—Ä–∏—Ü–∞ 4x4 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–µ—Å—Ç)
        4: [
            [inf, 10, 15, 20],
            [10, inf, 35, 25],
            [15, 35, inf, 30],
            [20, 25, 30, inf]
        ],
        # –ú–∞—Ç—Ä–∏—Ü–∞ 5x5 —Å —à–∞–±–ª–æ–Ω–æ–º
        5: [
            [inf, 20, 30, 10, 15],
            [20, inf, 25, 35, 40],
            [30, 25, inf, 45, 50],
            [10, 35, 45, inf, 60],
            [15, 40, 50, 60, inf]
        ],
        # –ú–∞—Ç—Ä–∏—Ü–∞ 6x6 —Å –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        6: [
            [inf, 12, 18, 23, 27, 31],
            [12, inf, 14, 19, 25, 29],
            [18, 14, inf, 16, 22, 26],
            [23, 19, 16, inf, 17, 24],
            [27, 25, 22, 17, inf, 21],
            [31, 29, 26, 24, 21, inf]
        ],
        # –ú–∞—Ç—Ä–∏—Ü–∞ 7x7 (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–∞–Ω–Ω–∞—è)
        7: [
            [inf, 10, 15, 20, 25, 30, 35],
            [10, inf, 12, 18, 22, 28, 32],
            [15, 12, inf, 14, 16, 24, 30],
            [20, 18, 14, inf, 15, 20, 25],
            [25, 22, 16, 15, inf, 18, 22],
            [30, 28, 24, 20, 18, inf, 12],
            [35, 32, 30, 25, 22, 12, inf]
        ]
    }

    for size, matrix in test_cases.items():
        results = benchmark_case(matrix, iterations=3)
        print_results(size, results)

if __name__ == '__main__':
    print("üöÄ –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –±–µ–Ω—á–º–∞—Ä–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –õ–∏—Ç—Ç–ª–∞")
    run_benchmarks()
    print("\n‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã")